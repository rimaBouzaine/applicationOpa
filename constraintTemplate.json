{
  "apiVersion": "templates.gatekeeper.sh/v1beta1",
  "kind": "ConstraintTemplate",
  "metadata": {
    "name": "nvnom"
  },
  "spec": {
    "crd": {
      "spec": {
        "names": {
          "kind": "NvNom"
        },
        "validation": {
          "openAPIV3Schema": {
            "properties": {
              "invalidName": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "targets": [
      {
        "target": "admission.k8s.gatekeeper.sh",
        "rego": "package k8sdenynames\nviolation[{\"msg\": msg}] {\n  input.review.object.metadata.name == input.parameters.invalidName\n  msg := sprintf(\"The name %v is not allowed\", [input.parameters.invalidName])\n}\n"
      }
    ]
  }
}

